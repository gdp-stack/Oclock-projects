-- Echantillonage : se donner quelques données de tests pour le mode developpement
-- SEED = graine
-- Dans une optique de FACILITER LE DEVEOPPEMENT 
-- On insère des FAUSSES DONNEES dans les tables. 
-- === DATA MANIPULATION LAYER === (ajouter des enregistrement dans les tables)

BEGIN;

INSERT INTO "list"
  ("id", "title", "position")
VALUES
  (1, 'Liste des courses', 1),
  (2, 'Todo', 2),
  (3, 'Liste des anniversaires', 3)
;


INSERT INTO "card" 
  (id, position, content, color, list_id)
VALUES
  (1, 3, 'Savon', '#FF00FF', 1),
  (2, 2, 'Chartreuse', NULL, 1),
  (3, 1, 'Concombre', '#00FF00', 1),

  (4, 1, 'Dormir', '#FF0000', 2),
  (5, 2, 'Nourrir le chat', NULL, 2),
  (6, 2, 'Devenir le meilleur dresseur', NULL, 2),

  (7, 1, 'Maman le 01/01/1970', '#0000FF', 3)
;

INSERT INTO "tag" 
  (id, name, color)
VALUES 
  (1, 'Urgent', '#FF00FF'),
  (2, 'En retard', '#000000'),
  (3, 'Eco-friendly', '#00FF00')
;

INSERT INTO "card_has_tag" 
  (card_id, tag_id) 
VALUES 
  (1, 3), -- Savon : eco-friendly
  (1, 1), -- Savon : urgent
  (5, 1), -- Nourrir le chat : urgent
  (4, 2)  -- Dormir : en retard
;


-- On va ré-initialiser les séquences d'ID 
-- (puisqu'ici on insère les ID manuellement alors qu'on ne devrait pas, et on devrait laisser la BDD choisir pour nous)

SELECT setval('list_id_seq', (SELECT MAX(id) from "list")); -- Après notre seed MANUEL, on met à jour la séquence du GENERATED BY DEFAULT AS IDENTITY pour que le prochain ID soit supérieur au MAX des id actuels 
SELECT setval('card_id_seq', (SELECT MAX(id) from "card"));
SELECT setval('tag_id_seq', (SELECT MAX(id) from "tag"));


COMMIT;
